<mujoco model="pong">
  <option gravity="0 0 0" timestep="0.002" integrator="implicit" cone="elliptic">
    <flag warmstart="enable"/>
  </option>

  <default>
    <!--
    For elastic collisions:
    - condim="1": frictionless contact (only normal force)
    - friction="0 0 0": no friction
    - solref: negative values = (-stiffness, -damping) directly
      High stiffness (-10000) and very low damping (-1) for bouncy response
    - solimp: (dmin, dmax, width, midpoint, power) controls constraint softness
      Values close to 1 make constraints tight/hard
    -->
    <geom condim="1" friction="0 0 0"
          solref="-50000 -0.1"
          solimp="0.999 0.9999 0.0001 0.5 2"/>
    <joint damping="0" armature="0"/>
  </default>

  <asset>
    <material name="paddle_left" rgba="0.2 0.6 1.0 1"/>
    <material name="paddle_right" rgba="1.0 0.3 0.3 1"/>
    <material name="ball" rgba="1.0 1.0 1.0 1"/>
    <material name="wall" rgba="0.3 0.3 0.3 1"/>
    <material name="table" rgba="0.1 0.1 0.15 1"/>
  </asset>

  <worldbody>
    <!-- Table surface (visual only) -->
    <geom name="table" type="box" size="1.1 0.85 0.01" pos="0 0 -0.02"
          material="table" contype="0" conaffinity="0"/>

    <!-- Center line (visual only) -->
    <geom name="centerline" type="box" size="0.005 0.8 0.005" pos="0 0 0"
          rgba="0.4 0.4 0.4 1" contype="0" conaffinity="0"/>

    <!-- Top wall -->
    <geom name="wall_top" type="box" size="1.1 0.05 0.03" pos="0 0.85 0"
          material="wall" contype="1" conaffinity="1"/>

    <!-- Bottom wall -->
    <geom name="wall_bottom" type="box" size="1.1 0.05 0.03" pos="0 -0.85 0"
          material="wall" contype="1" conaffinity="1"/>

    <!-- Ball - very light for responsive bounces -->
    <body name="ball" pos="0 0 0">
      <joint name="ball_x" type="slide" axis="1 0 0" range="-1.2 1.2" damping="0"/>
      <joint name="ball_y" type="slide" axis="0 1 0" range="-0.9 0.9" damping="0"/>
      <geom name="ball" type="sphere" size="0.03" mass="0.005"
            material="ball" contype="1" conaffinity="1"/>
    </body>

    <!-- Left paddle (human player) - heavy for solid hits, low damping for snappy response -->
    <body name="paddle_left" pos="-0.95 0 0">
      <joint name="paddle_left_y" type="slide" axis="0 1 0" range="-0.65 0.65" damping="2"/>
      <geom name="paddle_left" type="box" size="0.02 0.12 0.03" mass="1.0"
            material="paddle_left" contype="1" conaffinity="1"/>
    </body>

    <!-- Right paddle (AI player) - heavy for solid hits, low damping for snappy response -->
    <body name="paddle_right" pos="0.95 0 0">
      <joint name="paddle_right_y" type="slide" axis="0 1 0" range="-0.65 0.65" damping="2"/>
      <geom name="paddle_right" type="box" size="0.02 0.12 0.03" mass="1.0"
            material="paddle_right" contype="1" conaffinity="1"/>
    </body>
  </worldbody>

  <actuator>
    <!-- Velocity actuators for paddle control - very high kv for arcade-like response -->
    <velocity name="paddle_left_vel" joint="paddle_left_y" kv="2000" ctrlrange="-10 10"/>
    <velocity name="paddle_right_vel" joint="paddle_right_y" kv="2000" ctrlrange="-10 10"/>
  </actuator>

  <sensor>
    <jointpos name="ball_x_pos" joint="ball_x"/>
    <jointpos name="ball_y_pos" joint="ball_y"/>
    <jointvel name="ball_x_vel" joint="ball_x"/>
    <jointvel name="ball_y_vel" joint="ball_y"/>
    <jointpos name="paddle_left_pos" joint="paddle_left_y"/>
    <jointpos name="paddle_right_pos" joint="paddle_right_y"/>
  </sensor>
</mujoco>
